<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:task="http://www.springframework.org/schema/task"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
            http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.2.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
            http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
            http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.2xsd">
		    <!-- 静态资源映射  -->
		<!--     <mvc:resources mapping="/static/**" location="/static/" cache-period="172800"/> -->
		    <!-- 注册mapping,class信息等... -->
		    <mvc:annotation-driven />
		    <!-- 开启aop -->
		    <aop:aspectj-autoproxy />
		    <!-- 扫描annotation -->
		    <context:component-scan base-package="com.training.springmvc" />
		 
		    <!-- 配置拦截器 -->
		<!--     <mvc:interceptors>
		        <bean class="org.springframework.web.servlet.mvc.WebContentInterceptor">
		            <property name="cacheSeconds" value="0" />
		            <property name="useExpiresHeader" value="true" />
		            <property name="useCacheControlHeader" value="true" />
		            <property name="useCacheControlNoStore" value="true" />
		            <property name="alwaysUseFullPath" value="true" />
		        </bean>
		    </mvc:interceptors> -->
		 
		    <!-- 多视图解析 .json .xml -->
		    <bean id="cnmFactoryBean" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
		         <!-- 用于开启 /userinfo/123?format=json 的支持 默认是true -->
                <property name="favorParameter" value="false" />
                <!-- 用于关闭 /userinfo/123.json 的支持 默认是true -->
                <property name="favorPathExtension" value="true" />
                <!-- 设置为true以忽略对Accept Header的支持 -->
                <property name="ignoreAcceptHeader" value="true" />
                <!-- 在没有扩展名时即: "/user/1" 时的默认展现形式 -->
                <property name="defaultContentType" value="text/html" />
                <!-- 扩展名至mediaType的映射,即 /user.json => application/json -->
                <property name="mediaTypes">
                    <map>
                        <entry key="html" value="text/html" />
                        <entry key="json" value="application/json" />
                        <entry key="xml" value="application/xml" />
                    </map>
                </property>
            </bean>
		    <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
		        <property name="order" value="1" />
                <property name="contentNegotiationManager" ref="cnmFactoryBean"/>
<!-- 		        <property name="viewResolvers">
		        <list>
		        <ref bean="viewResolver" />
		        </list>
		        </property> -->
		        <property name="defaultViews">
		            <list>
		              <ref bean="jsonView" />
		              <ref bean="xmlView" />
		            </list>
		        </property>
		    </bean>
<!-- 
           <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">  
                    <property name="prefix" value="/WEB-INF/views/"></property>
                    <property name="suffix" value=".jsp"></property> 
            </bean>  -->
                
		    <bean name="jsonView" class="org.springframework.web.servlet.view.json.MappingJackson2JsonView">     
		        <property name="encoding">
		            <value type="com.fasterxml.jackson.core.JsonEncoding">UTF8</value>
		        </property>
		        <property name="extractValueFromSingleKeyModel" value="true"></property>
		        <property name="contentType" value="application/json;charset=UTF-8" />
		    </bean>
		     
		    <bean name="xmlView" class="org.springframework.web.servlet.view.xml.MarshallingView">
		        <constructor-arg>
		          <bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
		            <property name="packagesToScan" value="com.training.springmvc.model"/>
		          </bean>
		        </constructor-arg>
		        <property name="contentType" value="application/xml;charset=UTF-8" />
		    </bean>
		    <!-- 文件上传 -->
		<!--     <bean id="multipartResolver"
		          class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
		        1024*1024*5即5M
		        <property name="maxUploadSize" value="5242880"/>
		    </bean> -->
</beans>